<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EAN-13 Generator</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FBFF; /* Brighter, near-white blue background */
            color: #1F2937; /* Darker gray for primary text */
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem; /* Responsive padding (reduced slightly) */
        }
        
        .card-container {
            background-color: #FFFFFF;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -4px rgba(0, 0, 0, 0.05); /* Softer, lighter shadow */
            padding: 2.5rem;
            max-width: 38rem; /* Wider card */
            width: 100%;
            border: 1px solid #E5E7EB; /* Subtle border */
            position: relative; /* For overlay */
            overflow: hidden; /* For rounded corners of overlay */
        }

        /* Custom scrollbar for a cleaner look in the output box */
        pre::-webkit-scrollbar {
            width: 8px;
        }
        pre::-webkit-scrollbar-track {
            background: #F3F4F6; /* Light gray track */
            border-radius: 10px;
        }
        pre::-webkit-scrollbar-thumb {
            background: #3B82F6; /* blue-500 */
            border-radius: 10px;
        }
        pre::-webkit-scrollbar-thumb:hover {
            background: #2563EB; /* blue-600 */
        }

        /* Custom focus ring color for accessibility and theme consistency */
        .focus-ring-blue:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3); /* Softer, thicker blue shadow */
            border-color: #3B82F6; /* Blue border on focus */
        }

        /* Overlay styles */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1.5rem; /* Match card border-radius */
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none; /* Allows interaction underneath when hidden */
            z-index: 10;
        }
        .overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top: 4px solid #3B82F6; /* blue-500 (already bright) */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <!-- Main Card Container --><div class="card-container">
        
        <h1 class="text-5xl font-extrabold text-center mb-4 text-blue-600 tracking-tight">
            EAN-13 Generator
        </h1>
        <p class="text-center text-gray-600 mb-10 max-w-md mx-auto text-lg leading-relaxed">
            Generate valid EAN-13 barcodes with ease. Specify the quantity and click 'Generate'.
        </p>
        
        <!-- Input and Button Row --><div class="flex flex-col md:flex-row gap-4 mb-8">
            <input 
                type="number" 
                id="quantity"
                placeholder="Number of codes (1-5000)"
                value="13"
                min="1"
                max="5000"
                class="flex-1 w-full md:w-auto rounded-xl border border-gray-300 p-4 text-gray-800 placeholder-gray-400 focus-ring-blue transition-all duration-200 text-lg"
                aria-label="Number of EAN-13 codes to generate"
            />
            <button 
                id="generateBtn"
                class="w-full md:w-48 bg-blue-500 text-white rounded-xl p-4 font-bold hover:bg-blue-600 transition-colors duration-200 shadow-lg focus-ring-blue text-lg"
            >
                Generate Codes
            </button>
        </div>

        <!-- Output Area --><div>
            <label for="output" class="text-xl font-semibold text-gray-700 mb-4 block">Generated Numbers:</label>
            <pre id="output" class="bg-gray-50 text-gray-800 rounded-xl p-6 h-80 overflow-auto font-mono text-base leading-relaxed shadow-inner border border-gray-200 transition-colors duration-200" aria-live="polite">Click 'Generate Codes' to see results here...</pre>
        </div>

        <!-- Loading Overlay --><div id="loadingOverlay" class="overlay">
            <div class="spinner"></div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const generateBtn = document.getElementById('generateBtn');
            const quantityInput = document.getElementById('quantity');
            const outputEl = document.getElementById('output');
            const loadingOverlay = document.getElementById('loadingOverlay');

            /**
             * Calculates the EAN-13 check digit for a 12-digit prefix.
             * @param {string} prefix - A string of exactly 12 digits.
             * @returns {number} The calculated check digit.
             */
            function calculateCheckDigit(prefix) {
                let sumOdd = 0;  // Corresponds to 0-based even indices (pos 1, 3, 5...)
                let sumEven = 0; // Corresponds to 0-based odd indices (pos 2, 4, 6...)

                for (let i = 0; i < 12; i++) {
                    const digit = parseInt(prefix[i], 10);
                    if (i % 2 === 0) {
                        sumOdd += digit;
                    } else {
                        sumEven += digit;
                    }
                }
                
                const total = sumOdd + (sumEven * 3);
                const check = (10 - (total % 10)) % 10;
                return check;
            }

            /**
             * Validates if a given number is a valid EAN-13 code.
             * @param {string} number - A 13-digit string to validate.
             * @returns {boolean} True if valid, false otherwise.
             */
            function isValidEan13(number) {
                // Strict check: must be exactly 13 digits, all numeric
                if (number.length !== 13 || !/^\d+$/.test(number)) {
                    return false;
                }
                const prefix = number.substring(0, 12);
                const check = parseInt(number[12], 10);
                const calculated = calculateCheckDigit(prefix);
                return check === calculated;
            }

            /**
             * Generates a random, valid EAN-13 number.
             * @returns {string} A 13-digit valid EAN-13 number.
             */
            function generateRandomEan13() {
                let prefix = '';
                for (let i = 0; i < 12; i++) {
                    // Generate a random digit (0-9)
                    prefix += Math.floor(Math.random() * 10).toString();
                }
                const check = calculateCheckDigit(prefix);
                return prefix + check.toString();
            }

            /**
             * Handles the generate button click event.
             */
            async function handleGenerate() {
                const countStr = quantityInput.value;
                const count = parseInt(countStr, 10);
                
                // Validate input
                if (isNaN(count) || count <= 0 || count > 5000) {
                    outputEl.style.color = '#DC2626'; /* red-600 */
                    outputEl.textContent = 'Error: Please enter a valid number between 1 and 5000.';
                    return;
                }
                
                // Show loading overlay
                loadingOverlay.classList.add('active');
                generateBtn.disabled = true; // Disable button during generation
                quantityInput.disabled = true;

                outputEl.style.color = '#1F2937'; /* Default text color */
                outputEl.textContent = 'Generating...'; // Initial message

                // Simulate a slight delay for better UX and to allow overlay to render
                await new Promise(resolve => setTimeout(resolve, 300));

                let results = [];
                for (let i = 0; i < count; i++) {
                    const num = generateRandomEan13();
                    const isValid = isValidEan13(num); // This will always be true given our generation method
                    results.push(`${num}  valid: ${isValid}`);
                    // For very large counts, update progressively (optional, for extreme cases)
                    // if (i % 100 === 0 && i !== 0) {
                    //     outputEl.textContent = results.join('\n') + '\nGenerating...';
                    // }
                }
                
                // Hide loading overlay
                loadingOverlay.classList.remove('active');
                generateBtn.disabled = false; // Re-enable button
                quantityInput.disabled = false;

                // Display results
                outputEl.textContent = results.join('\n');
            }

            // Attach event listener
            generateBtn.addEventListener('click', handleGenerate);

            // Allow pressing Enter in the input field
            quantityInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    handleGenerate();
                }
            });

            // Initial focus for better UX
            quantityInput.focus();
        });
    </script>

</body>
</html>


